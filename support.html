<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Support - Crypto Trading Market</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Arial', sans-serif;
    }
    
    body, html {
      height: 100%;
      color: #0c0b0b;
      overflow-x: hidden;
      position: relative;
    }
    
    .background-container {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: -1;
      overflow: hidden;
    }
    
    .background-container video {
      min-width: 100%;
      min-height: 100%;
      width: auto;
      height: auto;
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      object-fit: cover;
    }
    
    header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      background: rgba(12, 12, 12, 0.85);
      padding: 10px 20px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
      position: relative;
      z-index: 1;
    }
    
    .logo-title {
      display: flex;
      align-items: center;
    }
    
    .logo-title video {
      width: 50px;
      height: 50px;
      margin-right: 15px;
    }
    
    .logo-title h1 {
      font-size: 28px;
      font-weight: bold;
      color: #2e7d32;
      cursor: pointer;
    }
    
    .nav {
      display: flex;
      gap: 15px;
    }
    
    .nav a {
      color: #2e7d32;
      text-decoration: none;
      font-weight: bold;
      padding: 5px 10px;
      border-radius: 4px;
      transition: background 0.3s;
    }
    
    .nav a:hover {
      background: rgba(246, 248, 248, 0.7);
    }
    
    .support-container {
      max-width: 1000px;
      margin: 30px auto;
      padding: 0 20px 60px;
    }
    
    .support-header {
      text-align: center;
      margin-bottom: 40px;
    }
    
    .support-header h2 {
      font-size: 32px;
      color: #2e7d32;
      margin-bottom: 15px;
    }
    
    .support-header p {
      font-size: 16px;
      color: hsl(0, 18%, 96%);
      max-width: 700px;
      margin: 0 auto;
    }
    
    .support-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 30px;
      margin-top: 30px;
    }
    
    .support-card {
      background: rgba(255, 255, 255, 0.8);
      padding: 30px;
      border-radius: 8px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.05);
      transition: all 0.3s;
    }
    
    .support-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 5px 15px rgba(0,0,0,0.1);
    }
    
    .support-card h3 {
      color: #2e7d32;
      margin-bottom: 20px;
      font-size: 22px;
    }
    
    .form-group {
      margin-bottom: 20px;
    }
    
    .form-group label {
      display: block;
      margin-bottom: 8px;
      font-weight: bold;
      color: #333;
    }
    
    .form-group input,
    .form-group select,
    .form-group textarea {
      width: 100%;
      padding: 14px;
      border: 1px solid #ddd;
      border-radius: 6px;
      font-size: 16px;
      background: rgba(255, 255, 255, 0.9);
      transition: all 0.3s;
    }
    
    .form-group input:focus,
    .form-group select:focus,
    .form-group textarea:focus {
      border-color: #2e7d32;
      box-shadow: 0 0 0 3px rgba(46, 125, 50, 0.2);
      outline: none;
    }
    
    .form-group textarea {
      min-height: 150px;
      resize: vertical;
    }
    
    .submit-btn {
      width: 100%;
      padding: 15px;
      background: #2e7d32;
      color: white;
      border: none;
      border-radius: 6px;
      font-size: 16px;
      font-weight: bold;
      cursor: pointer;
      transition: all 0.3s;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
    }
    
    .submit-btn:hover {
      background: #1b5e20;
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(46, 125, 50, 0.3);
    }
    
    .submit-btn:disabled {
      background: #cccccc;
      cursor: not-allowed;
      transform: none;
      box-shadow: none;
    }
    
    .loading-spinner {
      display: none;
      width: 24px;
      height: 24px;
      border: 3px solid rgba(255,255,255,0.3);
      border-radius: 50%;
      border-top-color: white;
      animation: spin 1s ease-in-out infinite;
    }
    
    @keyframes spin {
      to { transform: rotate(360deg); }
    }
    
    .success-message {
      display: none;
      padding: 20px;
      background: rgba(46, 125, 50, 0.1);
      border-radius: 6px;
      margin-top: 25px;
      text-align: center;
      color: #2e7d32;
      font-weight: bold;
      animation: fadeIn 0.5s ease-out;
    }
    
    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }
    
    .contact-methods {
      margin-top: 30px;
    }
    
    .contact-method {
      display: flex;
      align-items: center;
      gap: 15px;
      margin-bottom: 20px;
      padding-bottom: 20px;
      border-bottom: 1px solid rgba(0,0,0,0.1);
    }
    
    .contact-method:last-child {
      border-bottom: none;
    }
    
    .contact-icon {
      width: 50px;
      height: 50px;
      background: rgba(46, 125, 50, 0.1);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      color: #2e7d32;
      font-size: 20px;
    }
    
    .contact-info h4 {
      margin-bottom: 5px;
      color: #2e7d32;
    }
    
    .contact-info p, .contact-info a {
      color: #555;
      text-decoration: none;
    }
    
    .contact-info a:hover {
      color: #2e7d32;
      text-decoration: underline;
    }
    
    .file-upload {
      margin-top: 10px;
    }
    
    .file-upload-label {
      display: flex;
      align-items: center;
      gap: 10px;
      padding: 10px 15px;
      background: rgba(46, 125, 50, 0.1);
      border-radius: 6px;
      cursor: pointer;
      transition: all 0.3s;
    }
    
    .file-upload-label:hover {
      background: rgba(46, 125, 50, 0.2);
    }
    
    .file-upload input {
      display: none;
    }
    
    .file-name {
      margin-top: 5px;
      font-size: 14px;
      color: #666;
    }
    
    footer {
      text-align: center;
      background: rgba(3, 8, 3, 0.9);
      color: #fff;
      padding: 15px;
      font-size: 14px;
      position: fixed;
      bottom: 0;
      left: 0;
      width: 100%;
    }
    
    /* Responsive adjustments */
    @media (max-width: 768px) {
      .support-grid {
        grid-template-columns: 1fr;
      }
      
      .support-card {
        padding: 20px;
      }
    }
  </style>
</head>
<body>
  <div class="background-container">
    <video autoplay muted loop playsinline>
      <source src="https://dl.dropboxusercontent.com/scl/fi/grduhrszolyx2ipyvjm64/Logo.mp4?rlkey=z9xijvc8x9cpjs7o2dq3r533b&st=iuyj95p2" type="video/mp4">
      Your browser does not support the video tag.
    </video>
  </div>

  <header>
    <div class="logo-title">
      <video autoplay muted loop>
        <source src="https://dl.dropboxusercontent.com/scl/fi/grduhrszolyx2ipyvjm64/Logo.mp4?rlkey=z9xijvc8x9cpjs7o2dq3r533b&st=iuyj95p2" type="video/mp4">
      </video>
      <h1 onclick="window.location.href='index.html'">Crypto Trading Market</h1>
    </div>
    <div class="nav">
      <a href="index.html">Home</a>
      <a href="account.html">Account</a>
      <a href="faqs.html">FAQs</a>
      <a href="support.html" style="background: rgba(232, 245, 233, 0.3);">Support</a>
      <a href="javascript:void(0)" onclick="logoutUser()">Logout</a>
    </div>
  </header>

  <div class="support-container">
    <div class="support-header">
      <h2>Customer Support</h2>
      <p>We're here to help you with any questions or issues you may have. Choose the best way to contact us below.</p>
    </div>
    
    <div class="support-grid">
      <div class="support-card">
        <h3>Submit a Support Ticket</h3>
        <form id="supportForm">
          <div class="form-group">
            <label for="supportName">Your Name</label>
            <input type="text" id="supportName" required>
          </div>
          
          <div class="form-group">
            <label for="supportEmail">Email Address</label>
            <input type="email" id="supportEmail" required>
          </div>
          
          <div class="form-group">
            <label for="supportSubject">Subject</label>
            <select id="supportSubject" required>
              <option value="">Select a subject</option>
              <option value="Account Issues">Account Issues</option>
              <option value="Deposit Problems">Deposit Problems</option>
              <option value="Withdrawal Help">Withdrawal Help</option>
              <option value="Trading Questions">Trading Questions</option>
              <option value="Technical Support">Technical Support</option>
              <option value="Security Concern">Security Concern</option>
              <option value="Other">Other</option>
            </select>
          </div>
          
          <div class="form-group">
            <label for="supportMessage">Your Message</label>
            <textarea id="supportMessage" required placeholder="Please describe your issue in detail..."></textarea>
          </div>
          
          <div class="form-group">
            <label>Attachments (Optional)</label>
            <div class="file-upload">
              <label class="file-upload-label">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path d="M21 15V19C21 20.1046 20.1046 21 19 21H5C3.89543 21 3 20.1046 3 19V15M17 8L12 3M12 3L7 8M12 3V15" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
                <span>Choose File</span>
                <input type="file" id="supportAttachment" accept=".jpg,.jpeg,.png,.pdf,.doc,.docx">
              </label>
              <div class="file-name" id="fileName">No file chosen</div>
            </div>
          </div>
          
          <button type="submit" class="submit-btn" id="submitTicketBtn">
            <span>Submit Ticket</span>
            <div class="loading-spinner" id="loadingSpinner"></div>
          </button>
          
          <div class="success-message" id="successMessage">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M22 11.08V12C21.9988 14.1564 21.3005 16.2547 20.0093 17.9818C18.7182 19.709 16.9033 20.9725 14.8354 21.5839C12.7674 22.1953 10.5573 22.1219 8.53447 21.3746C6.51168 20.6273 4.78465 19.2461 3.61096 17.4371C2.43727 15.628 1.87979 13.4881 2.02168 11.3363C2.16356 9.18455 2.99721 7.13631 4.39828 5.49706C5.79935 3.85781 7.69279 2.71537 9.79619 2.24013C11.8996 1.7649 14.1003 1.98232 16.07 2.86" stroke="#2e7d32" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M22 4L12 14.01L9 11.01" stroke="#2e7d32" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            <p>Your support ticket has been submitted successfully!</p>
            <p>We'll respond within 24 hours.</p>
          </div>
        </form>
      </div>
      
      <div class="support-card">
        <h3>Other Ways to Contact Us</h3>
        <div class="contact-methods">
          <div class="contact-method">
            <div class="contact-icon">
              <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M4 4H20C21.1 4 22 4.9 22 6V18C22 19.1 21.1 20 20 20H4C2.9 20 2 19.1 2 18V6C2 4.9 2.9 4 4 4Z" stroke="#2e7d32" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                <path d="M22 6L12 13L2 6" stroke="#2e7d32" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
            </div>
            <div class="contact-info">
              <h4>Email Support</h4>
              <p>For general inquiries</p>
              <a href="mailto:support@cryptotradingmarket.com">support@cryptotradingmarket.com</a>
            </div>
          </div>
          
          <div class="contact-method">
            <div class="contact-icon">
              <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M22 16.92V19C22 19.5304 21.7893 20.0391 21.4142 20.4142C21.0391 20.7893 20.5304 21 20 21H4C3.46957 21 2.96086 20.7893 2.58579 20.4142C2.21071 20.0391 2 19.5304 2 19V16.92M8 10L12 14L16 10M12 14V3" stroke="#2e7d32" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
            </div>
            <div class="contact-info">
              <h4>Priority Support</h4>
              <p>For urgent matters</p>
              <a href="mailto:priority@cryptotradingmarket.com">priority@cryptotradingmarket.com</a>
            </div>
          </div>
          
          <div class="contact-method">
            <div class="contact-icon">
              <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M5 4H9L11 9L8.5 10.5C9.57096 12.6715 11.3285 14.429 13.5 15.5L15 13L20 15V19C20 20.1046 19.1046 21 18 21C14.0993 21 10.4204 19.5746 7.65683 16.8432C4.92538 14.0796 3.5 10.4007 3.5 6.5C3.5 5.39543 4.39543 4.5 5.5 4.5H5Z" stroke="#2e7d32" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
            </div>
            <div class="contact-info">
              <h4>Phone Support</h4>
              <p>Available 24/7</p>
              <a href="tel:+18001234567">+1 (800) 123-4567</a>
            </div>
          </div>
          
          <div class="contact-method">
            <div class="contact-icon">
              <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M18 8C18 6.4087 17.3679 4.88258 16.2426 3.75736C15.1174 2.63214 13.5913 2 12 2C10.4087 2 8.88258 2.63214 7.75736 3.75736C6.63214 4.88258 6 6.4087 6 8C6 15 3 17 3 17H21C21 17 18 15 18 8Z" stroke="#2e7d32" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                <path d="M13.73 21C13.5542 21.3031 13.3019 21.5547 12.9982 21.7295C12.6946 21.9044 12.3504 21.9965 12 21.9965C11.6496 21.9965 11.3054 21.9044 11.0018 21.7295C10.6982 21.5547 10.4458 21.3031 10.27 21" stroke="#2e7d32" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
            </div>
            <div class="contact-info">
              <h4>Live Chat</h4>
              <p>Instant messaging support</p>
              <a href="javascript:void(0)" id="startChatBtn">Start Live Chat</a>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <footer>
    © 2025 Crypto Trading Market. All Rights Reserved
  </footer>

  <script>
    // Current user data
    const currentUser = JSON.parse(localStorage.getItem('currentUser')) || null;
    const authToken = localStorage.getItem('authToken');

    // DOM Elements
    const supportForm = document.getElementById('supportForm');
    const submitBtn = document.getElementById('submitTicketBtn');
    const loadingSpinner = document.getElementById('loadingSpinner');
    const successMessage = document.getElementById('successMessage');
    const fileInput = document.getElementById('supportAttachment');
    const fileNameDisplay = document.getElementById('fileName');
    const startChatBtn = document.getElementById('startChatBtn');

    // Handle file upload display
    fileInput.addEventListener('change', (e) => {
      if (e.target.files.length > 0) {
        fileNameDisplay.textContent = e.target.files[0].name;
      } else {
        fileNameDisplay.textContent = 'No file chosen';
      }
    });

    // Handle form submission
    supportForm.addEventListener('submit', async (e) => {
      e.preventDefault();
      
      // Show loading state
      submitBtn.disabled = true;
      loadingSpinner.style.display = 'block';
      
      // Get form data
      const formData = new FormData();
      formData.append('name', document.getElementById('supportName').value);
      formData.append('email', document.getElementById('supportEmail').value);
      formData.append('subject', document.getElementById('supportSubject').value);
      formData.append('message', document.getElementById('supportMessage').value);
      
      if (fileInput.files.length > 0) {
        formData.append('attachment', fileInput.files[0]);
      }
      
      try {
        // Send to backend
        const response = await fetch('/api/support/tickets', {
          method: 'POST',
          headers: {
            'Authorization': `Bearer ${authToken}`
          },
          body: formData
        });
        
        if (!response.ok) {
          throw new Error(await response.text());
        }
        
        // Show success
        supportForm.reset();
        fileNameDisplay.textContent = 'No file chosen';
        successMessage.style.display = 'block';
        submitBtn.disabled = false;
        loadingSpinner.style.display = 'none';
        
      } catch (error) {
        console.error('Error submitting ticket:', error);
        alert('Error submitting ticket. Please try again.');
        submitBtn.disabled = false;
        loadingSpinner.style.display = 'none';
      }
    });

    // Start live chat
    startChatBtn.addEventListener('click', () => {
      if (!currentUser) {
        alert('Please log in to use live chat');
        return;
      }
      alert('Live chat feature would open here in a production environment');
    });

    // Pre-fill user data if logged in
    if (currentUser) {
      document.getElementById('supportName').value = currentUser.name || '';
      document.getElementById('supportEmail').value = currentUser.email || '';
    }

    // Logout function
    function logoutUser() {
      localStorage.removeItem('currentUser');
      localStorage.removeItem('authToken');
      window.location.href = 'login.html';
    }

    // Ensure video plays on mobile
    document.addEventListener('DOMContentLoaded', () => {
      document.querySelectorAll('video').forEach(video => {
        video.setAttribute('playsinline', '');
        video.setAttribute('webkit-playsinline', '');
        video.play().catch(e => console.log('Video play prevented:', e));
      });
    });
  </script>
</body>
</html>